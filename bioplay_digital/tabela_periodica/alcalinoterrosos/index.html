<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Metais Alcalino-Terrosos Game Pro</title>
    <style>
        :root {
            --bg: #0f172a;
            --card: #1e293b;
            --accent: #84cc16; /* Verde lima/oliva para Alcalino-Terrosos */
            --green: #10b981;
            --gold: #f59e0b;
        }
        body { 
            background-color: var(--bg); 
            color: white; 
            font-family: 'Segoe UI', sans-serif; 
            margin: 0; 
            display: flex; 
            justify-content: center; 
            align-items: center; 
            min-height: 100vh;
            touch-action: none;
        }
        .container { 
            background-color: var(--card); 
            padding: 15px; 
            border-radius: 20px; 
            width: 90%; 
            max-width: 400px;
            box-shadow: 0 15px 35px rgba(0,0,0,0.5);
        }
        .stats-bar {
            display: flex;
            justify-content: space-between;
            margin-bottom: 12px;
            background: rgba(0,0,0,0.3);
            padding: 10px;
            border-radius: 10px;
            font-size: 0.9rem;
            font-weight: bold;
        }
        .header { 
            text-align: center; 
            background: linear-gradient(135deg, #4d7c0f, #10b981); 
            padding: 10px; 
            border-radius: 12px; 
            margin-bottom: 15px;
        }
        .header h1 { font-size: 1.1rem; margin: 0; text-transform: uppercase; }
        #grid { 
            display: grid; 
            grid-template-columns: repeat(12, 1fr); 
            gap: 2px; 
            background-color: #334155; 
            padding: 4px; 
            border-radius: 10px; 
            touch-action: none;
            user-select: none;
            -webkit-user-select: none;
        }
        .letter-cell { 
            aspect-ratio: 1/1;
            display: flex; 
            align-items: center; 
            justify-content: center; 
            background-color: var(--card); 
            font-weight: bold; 
            font-size: 12px; 
            border-radius: 3px;
        }
        .selected { background-color: var(--accent) !important; color: #0f172a; }
        .found { background-color: var(--green) !important; color: white; }
        .word-list { 
            display: grid; 
            grid-template-columns: repeat(3, 1fr); 
            gap: 6px; 
            margin-top: 15px;
            padding: 0;
            list-style: none;
        }
        .word-item { 
            font-size: 10px; 
            background: rgba(255,255,255,0.05); 
            padding: 8px; 
            border-radius: 4px; 
            text-align: center;
            border: 1px solid rgba(255,255,255,0.1);
        }
        .word-found { background: var(--green) !important; color: white; text-decoration: line-through; opacity: 0.6; }
        .btn-reload {
            width: 100%;
            margin-top: 15px;
            padding: 12px;
            border: none;
            border-radius: 10px;
            background: #475569;
            color: white;
            font-weight: bold;
            cursor: pointer;
        }
    </style>
</head>
<body>

<div class="container">
    <div class="stats-bar">
        <span>‚è±Ô∏è <span id="timer">00:00</span></span>
        <span style="color: var(--gold);">‚≠ê Pontos: <span id="score">0</span></span>
    </div>
    
    <div class="header"><h1>Alcalino-Terrosos</h1></div>
    
    <div id="grid"></div>

    <ul class="word-list" id="word-list"></ul>
    
    <button class="btn-reload" onclick="location.reload()">REINICIAR</button>
</div>

<script>
    const elementsData = [
        { simbolo: "Be", nome: "BERILIO" },
        { simbolo: "Mg", nome: "MAGNESIO" },
        { simbolo: "Ca", nome: "CALCIO" },
        { simbolo: "Sr", nome: "ESTRONCIO" },
        { simbolo: "Ba", nome: "BARIO" },
        { simbolo: "Ra", nome: "RADIO" }
    ];

    const wordsGrid = elementsData.map(e => e.nome);
    const size = 12;
    let gridData = Array(size).fill().map(() => Array(size).fill(''));
    let selectedCells = [];
    let isSelecting = false;
    let foundCount = 0;
    let score = 0;
    let seconds = 0;
    let timerActive = true;

    const timerInterval = setInterval(() => {
        if(timerActive) {
            seconds++;
            let min = Math.floor(seconds / 60).toString().padStart(2, '0');
            let sec = (seconds % 60).toString().padStart(2, '0');
            document.getElementById('timer').innerText = min + ":" + sec;
        }
    }, 1000);

    function startSelection(el) {
        isSelecting = true;
        selectedCells = [el];
        el.classList.add('selected');
    }

    function moveSelection(el) {
        if (isSelecting && !selectedCells.includes(el)) {
            const first = selectedCells[0];
            if (el.dataset.r === first.dataset.r || el.dataset.c === first.dataset.c) {
                selectedCells.push(el);
                el.classList.add('selected');
            }
        }
    }

    function endSelection() {
        if (!isSelecting) return;
        isSelecting = false;
        const currentStr = selectedCells.map(d => d.textContent).join('');
        const revStr = currentStr.split('').reverse().join('');
        const foundIndex = wordsGrid.findIndex(w => w === currentStr || w === revStr);

        if (foundIndex !== -1) {
            const wordItem = document.getElementById("word-" + foundIndex);
            if (wordItem && !wordItem.classList.contains('word-found')) {
                foundCount++;
                score += 100;
                document.getElementById('score').innerText = score;
                selectedCells.forEach(d => { d.classList.remove('selected'); d.classList.add('found'); });
                wordItem.classList.add('word-found');

                if (foundCount === elementsData.length) {
                    timerActive = false;
                    setTimeout(() => {
                        alert("üü¢ EXCELENTE!\nEncontrou todos os Alcalino-Terrosos!\n‚≠ê Pontos: " + score);
                    }, 300);
                }
            }
        } else {
            selectedCells.forEach(d => d.classList.remove('selected'));
        }
        selectedCells = [];
    }

    function init() {
        const gridEl = document.getElementById('grid');
        const listEl = document.getElementById('word-list');

        elementsData.forEach((item, index) => {
            const li = document.createElement('li');
            li.className = 'word-item';
            li.id = "word-" + index;
            li.innerHTML = `S√≠mbolo: <b>${item.simbolo}</b>`;
            listEl.appendChild(li);
        });

        wordsGrid.forEach(word => {
            let placed = false;
            let attempts = 0;
            while (!placed && attempts < 150) {
                const dir = Math.random() > 0.5 ? 'H' : 'V';
                const r = Math.floor(Math.random() * (size - (dir === 'V' ? word.length : 0)));
                const c = Math.floor(Math.random() * (size - (dir === 'H' ? word.length : 0)));
                let can = true;
                for (let i = 0; i < word.length; i++) {
                    const nr = dir === 'V' ? r + i : r;
                    const nc = dir === 'H' ? c + i : c;
                    if (gridData[nr][nc] !== '' && gridData[nr][nc] !== word[i]) { can = false; break; }
                }
                if (can) {
                    for (let i = 0; i < word.length; i++) {
                        gridData[dir === 'V' ? r + i : r][dir === 'H' ? c + i : c] = word[i];
                    }
                    placed = true;
                }
                attempts++;
            }
        });

        for (let r = 0; r < size; r++) {
            for (let c = 0; c < size; c++) {
                if (gridData[r][c] === '') gridData[r][c] = "ABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(Math.random() * 26)];
                const div = document.createElement('div');
                div.className = 'letter-cell';
                div.textContent = gridData[r][c];
                div.dataset.r = r;
                div.dataset.c = c;
                div.onmousedown = (e) => { e.preventDefault(); startSelection(div); };
                div.onmouseenter = () => moveSelection(div);
                gridEl.appendChild(div);
            }
        }

        gridEl.addEventListener('touchstart', (e) => {
            const touch = e.touches[0];
            const el = document.elementFromPoint(touch.clientX, touch.clientY);
            if (el && el.classList.contains('letter-cell')) startSelection(el);
            e.preventDefault();
        }, {passive: false});

        gridEl.addEventListener('touchmove', (e) => {
            const touch = e.touches[0];
            const el = document.elementFromPoint(touch.clientX, touch.clientY);
            if (el && el.classList.contains('letter-cell')) moveSelection(el);
            e.preventDefault();
        }, {passive: false});

        gridEl.addEventListener('touchend', endSelection);
        window.onmouseup = endSelection;
    }
    init();
</script>
</body>
</html>